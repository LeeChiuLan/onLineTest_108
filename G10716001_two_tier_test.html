<html>
<script>
    var sc = 0,
        x1;
    var firstans = [1, 4]; //firstans[pn]==cans
    var secondans = [2, 3]; //secondans[pn]==cans2
    var rec = [0, 0];
    var twotierQ = [];
	// q1.
    twotierQ[0] = "關於電腦病毒下列何者是正確？";
    twotierQ[1] = "A.電腦病毒會傳染";
    twotierQ[2] = "B.電腦病毒是由電腦系統的錯誤（bug)變異產生（如同電影的異形）";
    twotierQ[3] = "C.電腦病毒會影響你的健康";
    twotierQ[4] = "D.電腦病毒只會影響（如刪除、竊取、竄改）你的資料";
    twotierQ[5] = "1A.電腦病毒附著在資料中，所以很容易散佈"; //cans==1, pn*20+cans*4+1
    twotierQ[6] = "1B.電腦病毒是程式，所以擁有複製能力";
    twotierQ[7] = "1C.電腦病毒是因網路設備不正常運作，而帶到連線電腦";
    twotierQ[8] = "1D.是生物病毒變異產生，所以會傳染";
    twotierQ[9] = "2A.電腦bug會造成不正常行為"; //cans==2, pn*20+cans*4+1==9
    twotierQ[10] = "2B.因人工智慧使電腦系統產生變異";
    twotierQ[11] = "2C.因大數據技術使電腦系統產生變異";
    twotierQ[12] = "2D.因電腦系統管理不當所造成";
    twotierQ[13] = "3A.電腦病毒如同生物病毒"; //cans==3, pn*20+cans*4+1==13
    twotierQ[14] = "3B.電腦病毒會迷惑使用者失去控制，而影響健康";
    twotierQ[15] = "3C.電腦病毒會發射不好信號，影響健康";
    twotierQ[16] = "3D.電腦病毒是邪惡且有智慧病毒，所以會影響健康";
    twotierQ[17] = "4A.因為資料是最重要的資產"; //cans==4, pn*20+cans*4+1==17
    twotierQ[18] = "4B.因為人不易察覺資料被病毒改變";
    twotierQ[19] = "4C.因為病毒是以破壞資料為樂趣";
    twotierQ[20] = "4D.因為資料被影響，不易復原";
	// q2.
    twotierQ[21] = "F成績(如聯考成績)與S成績(如在學成績)的Pearson r=.506，p=.03，下列何者最正確？"; // question 2
    twotierQ[22] = "A.F為造成S之因";
    twotierQ[23] = "B.S是F造成之果";
    twotierQ[24] = "C.F與S相關性不足";
    twotierQ[25] = "D.F與S二者有中度正相關性";

    twotierQ[26] = "A.達顯著中度相關，能推論因果關係";
    twotierQ[27] = "B.p<.05，已達顯著水準，F為造成S之顯著原因";
    twotierQ[28] = "C.0.8<r<0.4代表中度正相關，F為造成S之中度因素";
    twotierQ[29] = "D.F為造成S之因，其解釋力約為25%";

    twotierQ[30] = "A.達顯著正相關，能推論因果關係";
    twotierQ[31] = "B.p<.05，已達顯著水準，S是F造成之果";
    twotierQ[32] = "C.0.8<r<0.4代表中度正相關，S是F造成之中度結果";
    twotierQ[33] = "D.S是F造成之果，其解釋力約為25%";

    twotierQ[34] = "A.因r=.506，達中度相關";
    twotierQ[35] = "B.因p<.05，達顯著水準";
    twotierQ[36] = "C.正相關所以可以推論正向因果關係";
    twotierQ[37] = "D.因中度且顯著，所以可推論正向因果關係";

    twotierQ[38] = "A.r值太低";
    twotierQ[39] = "B.p未達.001";
    twotierQ[40] = "C.p未達.01";
    twotierQ[41] = "D.未顯示人數（n）";
	// q3.
	
	var TOTAL_QUESTION_ITEMS = 2; //選取10題
    var answer = [2, 1, 4];
    var pn = 0,
        cans = 0;
    var rec = [0, 0, 0];
    var close = ['s1', 's2', 's3', 's4', 'c1'];
    var second_close = ['ss1', 'ss2', 'ss3', 'ss4']

    function report() {
        window.document.getElementById('score').innerHTML = 'score:<font color=red>' + sc + '分<font>';
    }

    function check() { //1st-tier
        togglesecond();
        var lock = 'item' + cans;
        document.getElementById(lock).style.color = "red";
        for (var w = 0; w <= 4; w++)
            document.getElementById(close[w]).disabled = true;
        shprob_2();
    }

    function check2() { //2nd-tier
        //togglesecond();
        var msg = "",
            x1;
        if (firstans[pn] == cans && secondans[pn] == cans2) {
            msg = "correct";
            rec[pn] = 1;
            sc++;
        } else {
            msg = "Incorrect";
        }
        pn++;
        togglesecond()
        for (var w = 0; w <= 4; w++) {
            document.getElementById(close[w]).disabled = false;
            document.getElementById(close[w]).checked = false;
            z = w < 4 ? w : w - 1
            document.getElementById(second_close[z]).disabled = false;
            document.getElementById(second_close[z]).checked = false;
            z = w < 4 ? w + 1 : w;
            var lock = 'item' + z;
            var lock2 = 'sitem' + z;
            document.getElementById(lock).style.color = "black";
            document.getElementById(lock2).style.color = "black";
        }

        shprob();
        document.getElementById('show1').innerHTML = msg;
        report();
    }

    function suggest() {
        var bug = '';
        var allpass = '<font color=blue>You are excellent!</font>';
        for (var i = 0; i < TOTAL_QUESTION_ITEMS; i++){
				if (rec[i] == 0) bug = bug + "第" + (i+1) + "題<font color=red>" + twotierQ[i*21] + "</font>答錯<br>";
			}
        if (bug == '')
            document.getElementById('misconcept').innerHTML = allpass;
        else
            document.getElementById('misconcept').innerHTML = bug;
    }

    function retest() {
        var bug = '';
        document.getElementById('misconcept').innerHTML = bug;
        pn = 0;
        sc = 0;
        cans = 0;
        report();
        shprob();
		document.getElementById('show1').innerHTML = '';
		window.document.getElementById('score').innerHTML = 'score:0';
    }

    function togglesecond() { //show or hide
        var x = document.getElementById("secondquest");
        if (x.style.display === "none") {
            x.style.display = "block";
        } else {
            x.style.display = "none";
        }
    }

</script>

<body onload="shprob();">
    知識大挑戰
    <hr>
    <table border>
        <tr>
            <td>
                <span id='voc'></span><br>
                <input type=radio name=q1 onclick='cans=1;' id='s1'><span id='item1'></span><br>
                <input type=radio name=q1 onclick='cans=2;' id='s2'><span id='item2'></span><br>
                <input type=radio name=q1 onclick='cans=3;' id='s3'><span id='item3'></span><br>
                <input type=radio name=q1 onclick='cans=4;' id='s4'><span id='item4'></span><br>
                <button onclick="check();" id='c1'>check answer(1st-tier)</button>
            </td>
            <td>
                <div id='secondquest' style='display: none;'>
                    <span id='secq'></span>的原因:<br>
                    <input type=radio name=q2 onclick='cans2=1;' id='ss1'><span id='sitem1'></span><br>
                    <input type=radio name=q2 onclick='cans2=2;' id='ss2'><span id='sitem2'></span><br>
                    <input type=radio name=q2 onclick='cans2=3;' id='ss3'><span id='sitem3'></span><br>
                    <input type=radio name=q2 onclick='cans2=4;' id='ss4'><span id='sitem4'></span><br>
                    <button onclick="check2();">check answer(2nd-tier)</button>
                </div>
            </td>
    </table>
    <p id='score'> score:0</p>
    <p id='show1'> </p>
    <button onclick='suggest();'>learning diagnosis</button>
    <p id='misconcept'> </p>
    <button onclick="retest();">重新挑戰</button>
    <script>
        function shprob() {
            if (pn < 2) {
                document.getElementById('voc').innerHTML = twotierQ[pn * 21 + 0];
                document.getElementById('item1').innerHTML = twotierQ[pn * 21 + 1];
                document.getElementById('item2').innerHTML = twotierQ[pn * 21 + 2];
                document.getElementById('item3').innerHTML = twotierQ[pn * 21 + 3];
                document.getElementById('item4').innerHTML = twotierQ[pn * 21 + 4];
            }
        } //shprob()

        function shprob_2() {
            if (pn < 2) { //cans
                document.getElementById('secq').innerHTML = twotierQ[pn * 21 + cans];
                document.getElementById('sitem1').innerHTML = twotierQ[pn * 21 + cans * 4 + 1]; //cans==1, pn*20+cans*4+1 
                document.getElementById('sitem2').innerHTML = twotierQ[pn * 21 + cans * 4 + 2];
                document.getElementById('sitem3').innerHTML = twotierQ[pn * 21 + cans * 4 + 3];
                document.getElementById('sitem4').innerHTML = twotierQ[pn * 21 + cans * 4 + 4];
            }
        } //shprob_2()

    </script>
</body>

</html>
